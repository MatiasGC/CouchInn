<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Formulario de Registro</title>
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel='stylesheet' href='style.css'/>
	<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'></script>
	<script src='http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js'></script>
	<script type="text/javascript" src="js/jquery-1.2.6.min.js"></script>
	<script type="text/javascript">
		window.onload = function () {
			document.getElementById("pass").onchange = validatePassword;
			document.getElementById("pass2").onchange = validatePassword;
		}
		function validatePassword(){
			var pass2=document.getElementById("pass").value;
			var pass1=document.getElementById("pass2").value;
			if(pass1!=pass2)
				document.getElementById("pass2").setCustomValidity("Las contraseñas no coinciden");
			else
				document.getElementById("pass2").setCustomValidity('');	 
			//empty string means no validation error
		}
		
		function validate(field){
			if (field.className!="touched")
				field.className += "touched";
		}
	</script>
	<script type="text/javascript">
		pic1 = new Image(16, 16); 
		pic1.src = "loader.gif";

		$(document).ready(function(){

			$("#username").change(function(){ 

				var usr = $("#username").val();

				$("#status").html('<img src="loader.gif" align="absmiddle">&nbsp;Checking availability...');

					$.ajax({  
					type: "POST",  
					url: "check.php",  
					data: "username="+ usr,  
					success: function(msg){  
				   
					   $("#status").ajaxComplete(function(event, request, settings){ 

							if(msg == '<font color="green">Nombre de usuario disponible</font>')
							{ 
								$("#username").removeClass('object_error'); // if necessary
								$("#username").addClass("object_ok");
								document.getElementById("username").setCustomValidity("");
								$(this).html(msg);
							}  
							else  
							{  
								$("#username").removeClass('object_ok'); // if necessary
								$("#username").addClass("object_error");
								document.getElementById("username").setCustomValidity("Nombre de usuario en uso");
								$(this).html(msg);
							}  
					   
					   });

				 } 
				   
				  }); 

			});

		});
	</SCRIPT>
	<script type="text/javascript">
		pic1 = new Image(16, 16); 
		pic1.src = "loader.gif";

		$(document).ready(function(){

			$("#email").change(function(){ 

				var mail = $("#email").val();

				$("#statusm").html('<img src="loader.gif" align="absmiddle">&nbsp;Chequeando disponibilidad...');

				$.ajax({  
					type: "POST",  
					url: "checkmail.php",  
					data: "email="+ mail,  
					success: function(msg){  
				   
					   $("#statusm").ajaxComplete(function(event, request, settings){ 

							if(msg == '<font color="green">E-mail disponible</font>')
							{ 
								$("#email").removeClass('object_error'); // if necessary
								$("#email").addClass("object_ok");
								document.getElementById("email").setCustomValidity("");
								$(this).html(msg);
							}  
							else  
							{  
								$("#email").removeClass('object_ok'); // if necessary
								$("#email").addClass("object_error");
								document.getElementById("email").setCustomValidity("E-mail en uso");
								$(this).html(msg);
							}  
					   
					   });

					} 
				   
				}); 

			
			});

		});
	</SCRIPT>
	
	
</head>

<body>
	<center>
	<div class="mainreg">
		<a href="index.html"><img src=logo.png width=500></a>
		<form action="registro.php" method="POST" onsubmit="return validacion();">
			<div class='row' id='reg'>
				<div class='col-xs-5 col-md-5'>
				</div>
				<div class='col-xs-2 col-md-2'>
				<input type="text" name = 'nombre' id='nombre' placeholder='Nombre' onblur='validate(this)' required>
				</div>
				<div class='col-xs-5 col-md-5'>
				</div>
			</div>
			<div class='row' id='reg'>
				<div class='col-xs-5 col-md-5'>
				</div>
				<div class='col-xs-2 col-md-2'>
				<input type="text" name = 'apellido' id='apellido' placeholder='Apellido' onblur='validate(this)' required>
				</div>
				<div class='col-xs-5 col-md-5'>
				</div>
			</div>
			<div class='row' id='reg'>
				<div class='col-xs-5 col-md-5'>
				</div>
				<div class='col-xs-2 col-md-2'>
				<input type="text" name = 'telefono' id='telefono' placeholder='Teléfono' onblur='validate(this)' required>
				</div>
				<div class='col-xs-5 col-md-5'>
				</div>
			</div>
			<div class='row' id='reg'>
				<div class='col-xs-5 col-md-5'>
				</div>
				<div class='col-xs-2 col-md-2'>
				<input type="text" name = 'username' id = 'username' placeholder='Nombre de usuario' onblur='validate(this)' autocomplete="off" required>
				</div>
				<div class='col-xs-5 col-md-5'>
				<td width="400" align="left"><div id="status"></div></td>
				</div>
			</div>		
			<div class='row' id='reg'>
				<div class='col-xs-5 col-md-5'>
				</div>
				<div class='col-xs-2 col-md-2'>
				<input type="email" name = 'email' id = 'email' placeholder='E-mail' onblur='validate(this)' autocomplete="off" required>
				</div>
				<div class='col-xs-5 col-md-5'>
				<td width="400" align="left"><div id="statusm"></div></td>
				</div>
			</div>
			<div class='row' id='reg'>
				<div class='col-xs-5 col-md-5'>
				</div>
				<div class='col-xs-2 col-md-2'>
				<input type="password" name= 'pass' id = 'pass' placeholder='Contraseña' onblur='validate(this)' autocomplete="off" required>
				</div>
				<div class='col-xs-5 col-md-5'>
				</div>
			</div>
			<div class='row' id='reg'>
				<div class='col-xs-5 col-md-5'>
				</div>
				<div class='col-xs-2 col-md-2'>
				<input type="password" name= 'pass2' id = 'pass2' placeholder='Confirmar contraseña' onblur='validate(this)' autocomplete="off" required>
				</div>
				<div class='col-xs-5 col-md-5'>
				</div>
			</div>
			<div class='row' id='reg'>
				<div class='col-xs-5 col-md-5'>
				</div>
				<div class='col-xs-2 col-md-2'>
				<button type="submit" class="btn">Registrarme</button>
				</div>
				<div class='col-xs-5 col-md-5'>
				</div>
			</div>
		</form>
	</div>
</body>
</html>